{
  "version": 3,
  "sources": ["../../svelte-floating-ui/index.js"],
  "sourcesContent": ["//@ts-ignore\nimport { arrow as arrowCore } from \"./core\";\nimport { autoUpdate as _autoUpdate, computePosition } from \"./dom/index.js\";\nimport { get } from \"svelte/store\";\nimport { onDestroy, tick } from 'svelte';\nexport function createFloatingActions(initOptions) {\n    let referenceElement;\n    let floatingElement;\n    const defaultOptions = {\n        autoUpdate: true\n    };\n    let options = initOptions;\n    const getOptions = (mixin) => {\n        return { ...defaultOptions, ...(initOptions || {}), ...(mixin || {}) };\n    };\n    const updatePosition = (updateOptions) => {\n        if (referenceElement && floatingElement) {\n            options = getOptions(updateOptions);\n            computePosition(referenceElement, floatingElement, options)\n                .then(v => {\n                Object.assign(floatingElement.style, {\n                    position: v.strategy,\n                    left: `${v.x}px`,\n                    top: `${v.y}px`,\n                });\n                options?.onComputed && options.onComputed(v);\n            });\n        }\n    };\n    const referenceAction = node => {\n        if ('subscribe' in node) {\n            setupVirtualElementObserver(node);\n            return {};\n        }\n        else {\n            referenceElement = node;\n            updatePosition();\n        }\n    };\n    const contentAction = (node, contentOptions) => {\n        let autoUpdateDestroy;\n        floatingElement = node;\n        options = getOptions(contentOptions);\n        setTimeout(() => updatePosition(contentOptions), 0); //tick doesn't work\n        updatePosition(contentOptions);\n        const destroyAutoUpdate = () => {\n            if (autoUpdateDestroy) {\n                autoUpdateDestroy();\n                autoUpdateDestroy = undefined;\n            }\n        };\n        const initAutoUpdate = ({ autoUpdate } = options || {}) => {\n            destroyAutoUpdate();\n            if (autoUpdate !== false) {\n                tick().then(() => {\n                    return _autoUpdate(referenceElement, floatingElement, () => updatePosition(options), (autoUpdate === true ? {} : autoUpdate));\n                });\n            }\n            return;\n        };\n        autoUpdateDestroy = initAutoUpdate();\n        return {\n            update(contentOptions) {\n                updatePosition(contentOptions);\n                autoUpdateDestroy = initAutoUpdate(contentOptions);\n            },\n            destroy() {\n                destroyAutoUpdate();\n            }\n        };\n    };\n    const setupVirtualElementObserver = (node) => {\n        const unsubscribe = node.subscribe(($node) => {\n            if (referenceElement === undefined) {\n                referenceElement = $node;\n                updatePosition();\n            }\n            else {\n                // Preserve the reference to the virtual element.\n                Object.assign(referenceElement, $node);\n                updatePosition();\n            }\n        });\n        onDestroy(unsubscribe);\n    };\n    return [\n        referenceAction,\n        contentAction,\n        updatePosition\n    ];\n}\nexport function arrow(options) {\n    return {\n        name: \"arrow\",\n        options,\n        fn(args) {\n            const element = get(options.element);\n            if (element) {\n                return arrowCore({\n                    element,\n                    padding: options.padding\n                }).fn(args);\n            }\n            return {};\n        }\n    };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAKO,SAAS,sBAAsB,aAAa;AAC/C,MAAI;AACJ,MAAI;AACJ,QAAM,iBAAiB;AAAA,IACnB,YAAY;AAAA,EAChB;AACA,MAAI,UAAU;AACd,QAAM,aAAa,CAAC,UAAU;AAC1B,WAAO,EAAE,GAAG,gBAAgB,GAAI,eAAe,CAAC,GAAI,GAAI,SAAS,CAAC,EAAG;AAAA,EACzE;AACA,QAAM,iBAAiB,CAAC,kBAAkB;AACtC,QAAI,oBAAoB,iBAAiB;AACrC,gBAAU,WAAW,aAAa;AAClC,sBAAgB,kBAAkB,iBAAiB,OAAO,EACrD,KAAK,OAAK;AACX,eAAO,OAAO,gBAAgB,OAAO;AAAA,UACjC,UAAU,EAAE;AAAA,UACZ,MAAM,GAAG,EAAE,CAAC;AAAA,UACZ,KAAK,GAAG,EAAE,CAAC;AAAA,QACf,CAAC;AACD,4CAAS,eAAc,QAAQ,WAAW,CAAC;AAAA,MAC/C,CAAC;AAAA,IACL;AAAA,EACJ;AACA,QAAM,kBAAkB,UAAQ;AAC5B,QAAI,eAAe,MAAM;AACrB,kCAA4B,IAAI;AAChC,aAAO,CAAC;AAAA,IACZ,OACK;AACD,yBAAmB;AACnB,qBAAe;AAAA,IACnB;AAAA,EACJ;AACA,QAAM,gBAAgB,CAAC,MAAM,mBAAmB;AAC5C,QAAI;AACJ,sBAAkB;AAClB,cAAU,WAAW,cAAc;AACnC,eAAW,MAAM,eAAe,cAAc,GAAG,CAAC;AAClD,mBAAe,cAAc;AAC7B,UAAM,oBAAoB,MAAM;AAC5B,UAAI,mBAAmB;AACnB,0BAAkB;AAClB,4BAAoB;AAAA,MACxB;AAAA,IACJ;AACA,UAAM,iBAAiB,CAAC,EAAE,YAAAA,YAAW,IAAI,WAAW,CAAC,MAAM;AACvD,wBAAkB;AAClB,UAAIA,gBAAe,OAAO;AACtB,aAAK,EAAE,KAAK,MAAM;AACd,iBAAO,WAAY,kBAAkB,iBAAiB,MAAM,eAAe,OAAO,GAAIA,gBAAe,OAAO,CAAC,IAAIA,WAAW;AAAA,QAChI,CAAC;AAAA,MACL;AACA;AAAA,IACJ;AACA,wBAAoB,eAAe;AACnC,WAAO;AAAA,MACH,OAAOC,iBAAgB;AACnB,uBAAeA,eAAc;AAC7B,4BAAoB,eAAeA,eAAc;AAAA,MACrD;AAAA,MACA,UAAU;AACN,0BAAkB;AAAA,MACtB;AAAA,IACJ;AAAA,EACJ;AACA,QAAM,8BAA8B,CAAC,SAAS;AAC1C,UAAM,cAAc,KAAK,UAAU,CAAC,UAAU;AAC1C,UAAI,qBAAqB,QAAW;AAChC,2BAAmB;AACnB,uBAAe;AAAA,MACnB,OACK;AAED,eAAO,OAAO,kBAAkB,KAAK;AACrC,uBAAe;AAAA,MACnB;AAAA,IACJ,CAAC;AACD,cAAU,WAAW;AAAA,EACzB;AACA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACJ;AACO,SAASC,OAAM,SAAS;AAC3B,SAAO;AAAA,IACH,MAAM;AAAA,IACN;AAAA,IACA,GAAG,MAAM;AACL,YAAM,UAAU,gBAAI,QAAQ,OAAO;AACnC,UAAI,SAAS;AACT,eAAO,MAAU;AAAA,UACb;AAAA,UACA,SAAS,QAAQ;AAAA,QACrB,CAAC,EAAE,GAAG,IAAI;AAAA,MACd;AACA,aAAO,CAAC;AAAA,IACZ;AAAA,EACJ;AACJ;",
  "names": ["autoUpdate", "contentOptions", "arrow"]
}
